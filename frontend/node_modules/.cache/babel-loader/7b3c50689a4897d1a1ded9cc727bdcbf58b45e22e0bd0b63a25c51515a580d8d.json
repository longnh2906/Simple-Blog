{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Long\\\\OneDrive - ptit.edu.vn\\\\Documents\\\\L\\u1EACP TR\\xCCNH WEB\\\\Simple Blog\\\\frontend\\\\src\\\\components\\\\editpost.js\",\n  _s = $RefreshSig$();\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditPost() {\n  _s();\n  const {\n    slug\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    fetch(`http://localhost:8080/api/post/${slug}`).then(res => res.json()).then(data => reset(data)) // điền dữ liệu sẵn vào form\n    .catch(err => console.error(\"Error fetching post:\", err));\n  }, [slug, reset]);\n  const onSubmit = async data => {\n    try {\n      const res = await fetch(`http://localhost:8080/api/post/${slug}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      });\n      if (res.ok) {\n        setMessage(\"Post updated successfully!\");\n        navigate(`/posts/${slug}`);\n      } else {\n        setMessage(\"Failed to update post.\");\n      }\n    } catch (err) {\n      console.error(err);\n      setMessage(\"Error occurred while updating post.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    style: {\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Title:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      ...register(\"title\", {\n        required: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), errors.title && /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Title is required\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 55\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Description:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      ...register(\"description\", {\n        required: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), errors.description && /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Description is required\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 67\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Category:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      ...register(\"category\", {\n        required: true\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Music\",\n        children: \"Music\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Science\",\n        children: \"Science\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Sports\",\n        children: \"Sports\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), errors.category && /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Category is required\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 61\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Update Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(EditPost, \"9VB7di7mcdlVaobRT8pe5QXy4pE=\", false, function () {\n  return [useParams, useNavigate, useForm];\n});\n_c = EditPost;\nexport default EditPost;\nvar _c;\n$RefreshReg$(_c, \"EditPost\");","map":{"version":3,"names":["useParams","useNavigate","useForm","useEffect","useState","jsxDEV","_jsxDEV","EditPost","_s","slug","navigate","register","handleSubmit","reset","formState","errors","message","setMessage","fetch","then","res","json","data","catch","err","console","error","onSubmit","method","headers","body","JSON","stringify","ok","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","type","required","title","description","value","category","_c","$RefreshReg$"],"sources":["C:/Users/Long/OneDrive - ptit.edu.vn/Documents/LẬP TRÌNH WEB/Simple Blog/frontend/src/components/editpost.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction EditPost() {\r\n  const { slug } = useParams();\r\n  const navigate = useNavigate();\r\n  const { register, handleSubmit, reset, formState: { errors } } = useForm();\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:8080/api/post/${slug}`)\r\n      .then(res => res.json())\r\n      .then(data => reset(data)) // điền dữ liệu sẵn vào form\r\n      .catch(err => console.error(\"Error fetching post:\", err));\r\n  }, [slug, reset]);\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      const res = await fetch(`http://localhost:8080/api/post/${slug}`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n      if (res.ok) {\r\n        setMessage(\"Post updated successfully!\");\r\n        navigate(`/posts/${slug}`);\r\n      } else {\r\n        setMessage(\"Failed to update post.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"Error occurred while updating post.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)} style={{ padding: 20 }}>\r\n      <h2>Edit Post</h2>\r\n      {message && <p>{message}</p>}\r\n\r\n      <label>Title:</label>\r\n      <input type=\"text\" {...register(\"title\", { required: true })} />\r\n      {errors.title && <span>Title is required</span>}<br />\r\n\r\n      <label>Description:</label>\r\n      <input type=\"text\" {...register(\"description\", { required: true })} />\r\n      {errors.description && <span>Description is required</span>}<br />\r\n\r\n      <label>Category:</label>\r\n      <select {...register(\"category\", { required: true })}>\r\n        <option value=\"Music\">Music</option>\r\n        <option value=\"Science\">Science</option>\r\n        <option value=\"Sports\">Sports</option>\r\n      </select>\r\n      {errors.category && <span>Category is required</span>}<br />\r\n\r\n      <button type=\"submit\">Update Post</button>\r\n    </form>\r\n  );\r\n}\r\nexport default EditPost;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}